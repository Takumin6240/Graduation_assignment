小学生向けScratch学習支援システム
ユーザー使用シナリオと機能一覧

================================================================================
目次
================================================================================
1. システム概要
2. ユーザー役割
3. 学生ユーザーの使用シナリオ
4. 管理者の使用シナリオ
5. 機能一覧
6. 画面遷移フロー


================================================================================
1. システム概要
================================================================================

■ 対象ユーザー
  - 主要ユーザー: 小学3年生〜6年生
  - 副次ユーザー: 教師・管理者（学習データの分析・管理）

■ 学習形式
  - チャプター制: テーマごとに分かれた学習単元
  - 4つの問題タイプ: 穴埋め、予測、バグ発見、ミッション
  - レベルシステム: 経験値(EXP)を獲得してレベルアップ
  - 適応的学習: 学年に応じたヒント提供

■ アクセスURL（開発環境）
  - フロントエンド: http://localhost:3010
  - バックエンドAPI: http://localhost:5000
  - データベース: PostgreSQL (localhost:5432)

================================================================================
2. ユーザー役割
================================================================================

【学生ユーザー】
  - アカウント登録とログイン
  - 問題の解答と提出
  - 進捗管理と学習履歴閲覧
  - レベルアップとEXP獲得

【管理者】
  - 問題コンテンツの管理
  - 学習データの分析とエクスポート
  - ユーザー管理
  - システム統計の閲覧

================================================================================
3. 学生ユーザーの使用シナリオ
================================================================================

■ シナリオ1: 初めての学習（新規ユーザー）

  【ステップ1】アカウント登録
    1. トップページから「新規登録」をクリック
    2. 以下の情報を入力:
       - ユーザー名（ログイン用ID）
       - パスワード
       - ニックネーム（表示名）
       - 学年（3〜6年生から選択）
    3. 「登録」ボタンをクリック
    4. 自動的にダッシュボードへリダイレクト

  【ステップ2】ダッシュボードの確認
    - 現在のレベルとEXPゲージを確認
    - 学習統計（解いた問題数、平均スコアなど）を確認

  【ステップ3】チャプター選択
    1. ダッシュボードから「チャプター」をクリック
    2. 学習したいチャプターを選択（例: Chapter 1: 順次処理）

  【ステップ4】問題選択と解答
    1. チャプター内の問題一覧から問題を選択
    2. 問題詳細ページで以下を確認:
       - 問題タイプ（穴埋め、予測、バグ発見、ミッション）
       - 学習目標
       - 問題文
       - 解答方法
    3. 必要に応じて「ヒントを見る」をクリックして学年別ヒントを確認
    4. 「Scratchエディタを開く」ボタンをクリック
    5. Scratchで問題を解く

  【ステップ5】解答提出
    ■ 穴埋め・バグ発見・ミッション問題の場合:
      1. Scratchで「ファイル」→「コンピューターに保存する」
      2. .sb3ファイルをダウンロード
      3. 問題ページで.sb3ファイルをアップロード
      4. 「提出する」ボタンをクリック

    ■ 予測問題の場合:
      1. プログラムの実行結果を予測
      2. X座標とY座標を入力
      3. 「提出する」ボタンをクリック

  【ステップ6】結果の確認
    - スコア（0〜100点）を確認
    - 獲得EXPとレベルアップ情報を確認
    - 正解の場合: 次の問題に進むか、チャプター一覧に戻る
    - 不正解の場合: 「もう一度挑戦」で再提出可能

================================================================================
4. 管理者の使用シナリオ
================================================================================

■ シナリオ1: 管理者アカウントの作成

  【ステップ1】管理者登録ページへアクセス
    1. 管理者登録ページ（/admin/register）へアクセス
    2. 以下の情報を入力:
       - ユーザー名（管理者ID）
       - パスワード
    3. 「登録」ボタンをクリック
    4. 登録成功後、管理者ログインページへ移動

  【注意事項】
    - 初期データシード実行時に、デフォルト管理者アカウント
      （username: admin, password: admin123）が自動作成されます
    - 追加の管理者アカウントが必要な場合のみ、この手順を実行してください

■ シナリオ2: 管理者ログインと統計確認

  【ステップ1】管理者ログイン
    1. 管理者ログインページへアクセス
    2. ユーザー名「admin」、パスワード「admin123」を入力
       （または作成した管理者アカウント情報を入力）
    3. 「ログイン」ボタンをクリック
    4. 管理者ダッシュボードにリダイレクト

  【ステップ2】システム統計の確認
    - 総ユーザー数
    - 総提出数
    - 平均スコア
    - 問題別の統計（提出回数、平均点、正解率）

■ シナリオ2: 問題管理

  【ステップ1】問題管理ページへ移動
    1. 「問題管理」をクリック
    2. 全問題の一覧がテーブル形式で表示される
       - ID、チャプター、タイトル、問題タイプ、難易度、順序

  【ステップ2】問題の正解ファイルをアップロード
    1. 対象の問題の「正解ファイル更新」ボタンをクリック
    2. モーダルウィンドウが開く
    3. Scratchで作成した正解プログラムの.sb3ファイルを選択
    4. 「アップロード」ボタンをクリック
    5. 成功メッセージを確認

  【ステップ3】Scratch URLの設定
    1. 同じ問題の「URL編集」ボタン（青色）をクリック
    2. URL編集モーダルが開く
    3. 学生が使用するScratch URLを入力
    4. 「保存」ボタンをクリック

  【ステップ4】正解座標の設定（予測問題の場合）
    1. 「正解座標編集」ボタンをクリック
    2. 正解座標編集モーダルが開く
    3. X座標とY座標を入力
    4. 「保存」ボタンをクリック

■ シナリオ3: ユーザー管理

  【ステップ1】ユーザー一覧の確認
    1. 「ユーザー管理」をクリック
    2. 全ユーザーがテーブル形式で表示される
       - ID、ユーザー名、ニックネーム、学年、レベル、EXP
    3. フィルター機能で学年別に絞り込み

  【ステップ2】ユーザー詳細の確認
    1. 対象ユーザーの「詳細」ボタンをクリック
    2. ユーザー詳細ページで以下を確認:
       - 基本情報（ユーザー名、ニックネーム、学年、レベル、EXP）
       - 学習統計（解いた問題数、平均スコアなど）
       - 提出履歴（全提出記録）

■ シナリオ4: 詳細分析とデータエクスポート

  【ステップ1】詳細分析の表示
    1. 管理者ダッシュボードから「詳細分析」セクションを確認
    2. 以下の情報を表示:
       - 問題別詳細統計（各問題の提出数、平均点、正解率、平均試行回数）
       - ユーザー別統計（各学生の進捗、平均スコア、最終提出日）

  【ステップ2】データのエクスポート
    1. 「CSV形式でエクスポート」ボタンをクリック
       - すべての分析データがCSV形式でダウンロード
    2. 「JSON形式でエクスポート」ボタンをクリック
       - すべての分析データがJSON形式でダウンロード

================================================================================
5. 機能一覧
================================================================================

■ 共通機能
┌────────────────┬────────────────────────────────────────┐
│ 機能カテゴリ       │ 説明                                   │
├────────────────┼────────────────────────────────────────┤
│ ユーザー登録       │ 学生が新規アカウントを作成             │
│                    │ （ユーザー名、パスワード、ニックネーム、│
│                    │  学年3〜6を選択）                      │
├────────────────┼────────────────────────────────────────┤
│ 管理者登録         │ 管理者が新規アカウントを作成           │
│                    │ （ユーザー名、パスワード）             │
│                    │ ※初期データシード時にデフォルト管理者  │
│                    │   (admin/admin123)が自動作成されます   │
├────────────────┼────────────────────────────────────────┤
│ ログイン/ログアウト│ JWT認証によるセキュアなログイン        │
├────────────────┼────────────────────────────────────────┤
│ 管理者ログイン     │ 管理者専用の認証エンドポイント         │
└────────────────┴────────────────────────────────────────┘

■ 学生ユーザー機能
┌────────────────┬────────────────────────────────────────┐
│ 機能名             │ 説明                                   │
├────────────────┼────────────────────────────────────────┤
│【ダッシュボード】                                              │
├────────────────┼────────────────────────────────────────┤
│ レベル表示         │ 現在のレベルをヘッダーとダッシュボード │
│                    │ に表示                                 │
├────────────────┼────────────────────────────────────────┤
│ EXPゲージ          │ 次のレベルまでの進捗をビジュアル表示   │
│                    │ （ヘッダーとダッシュボード）           │
├────────────────┼────────────────────────────────────────┤
│ 統計サマリー       │ クリア済み問題数、挑戦した問題数、     │
│                    │ 平均スコアなどの概要                   │
├────────────────┼────────────────────────────────────────┤
│【学習機能】                                                    │
├────────────────┼────────────────────────────────────────┤
│ チャプター一覧     │ 学習可能なチャプターをカード形式で表示 │
│                    │ （画像、タイトル、説明付き）           │
├────────────────┼────────────────────────────────────────┤
│ 問題一覧           │ チャプター内の問題リストを表示         │
│                    │ （問題タイプ別にアイコン表示）         │
├────────────────┼────────────────────────────────────────┤
│ 問題詳細           │ 学習目標、問題文、難易度、問題タイプを │
│                    │ 表示                                   │
├────────────────┼────────────────────────────────────────┤
│ 学年別ヒント       │ ユーザーの学年に応じたヒントを表示     │
│                    │ （折りたたみ可能なセクション）         │
│                    │ - 3年生: ブロック色の順番のみ          │
│                    │ - 4年生: 色と役割の説明                │
│                    │ - 5年生: 概念的フレームワーク          │
│                    │ - 6年生: IPOモデル                     │
├────────────────┼────────────────────────────────────────┤
│ Scratch連携        │ Scratchエディタを新しいタブで開く      │
│                    │ （問題ごとに設定されたURL）            │
├────────────────┼────────────────────────────────────────┤
│【解答提出】                                                    │
├────────────────┼────────────────────────────────────────┤
│ SB3ファイル        │ 穴埋め、バグ発見、ミッション問題の     │
│ アップロード       │ 解答を.sb3形式で提出                   │
├────────────────┼────────────────────────────────────────┤
│ 座標入力フォーム   │ 予測問題でX/Y座標を数値入力            │
├────────────────┼────────────────────────────────────────┤
│ 採点               │ 提出後に自動採点して結果を表示         │
├────────────────┼────────────────────────────────────────┤
│ スコア表示         │ 0〜100点のスコアを表示                 │
├────────────────┼────────────────────────────────────────┤
│ EXP獲得表示        │ 獲得したEXPをアニメーション付きで表示  │
│                    │ （ボーナスEXPも表示）                  │
├────────────────┼────────────────────────────────────────┤
│ レベルアップ通知   │ レベルアップ時にモーダルで祝福表示     │
├────────────────┼────────────────────────────────────────┤
│ フィードバック     │ 正解/不正解のメッセージと詳細          │
│                    │          │
├────────────────┼────────────────────────────────────────┤
│【学習履歴】                                                    │
├────────────────┼────────────────────────────────────────┤
│ 提出履歴           │ 過去の全提出記録を表示                 │
│                    │ （問題、日時、スコア、試行回数）       │
├────────────────┼────────────────────────────────────────┤
│ 再提出             │ 同じ問題に何度でも挑戦可能             │
├────────────────┼────────────────────────────────────────┤
│ 最高得点記録       │ 同一問題の最高得点を保持               │
└────────────────┴────────────────────────────────────────┘

■ 管理者機能
┌────────────────┬────────────────────────────────────────┐
│ 機能名             │ 説明                                   │
├────────────────┼────────────────────────────────────────┤
│【統計・分析】                                                  │
├────────────────┼────────────────────────────────────────┤
│ システム統計       │ 総ユーザー数、総提出数、平均スコア     │
├────────────────┼────────────────────────────────────────┤
│ 概要表示           │ システム全体の健全性を一目で確認       │
├────────────────┼────────────────────────────────────────┤
│ 問題分析           │ 問題ごとの提出回数、平均点、正解率     │
├────────────────┼────────────────────────────────────────┤
│ 詳細分析           │ 問題別・ユーザー別の詳細統計           │
│                    │ （平均試行回数、最終提出日など）       │
├────────────────┼────────────────────────────────────────┤
│ CSVエクスポート    │ 分析データをCSV形式でダウンロード      │
├────────────────┼────────────────────────────────────────┤
│ JSONエクスポート   │ 分析データをJSON形式でダウンロード     │
├────────────────┼────────────────────────────────────────┤
│【問題管理】                                                    │
├────────────────┼────────────────────────────────────────┤
│ 問題一覧表示       │ 全問題をテーブル形式で表示             │
├────────────────┼────────────────────────────────────────┤
│ 正解SB3アップロード│ 問題の正解ファイルを更新               │
│                    │ （モーダル形式）                       │
├────────────────┼────────────────────────────────────────┤
│ Scratch URL編集    │ 問題ごとのScratchエディタURLを設定     │
│                    │ （モーダル形式）                       │
├────────────────┼────────────────────────────────────────┤
│ 正解座標編集       │ 予測問題の正解X/Y座標を設定            │
│                    │ （モーダル形式）                       │
├────────────────┼────────────────────────────────────────┤
│ 問題情報表示       │ ID、チャプター、タイトル、種類、       │
│                    │ 難易度、順序                           │
├────────────────┼────────────────────────────────────────┤
│【ユーザー管理】                                                │
├────────────────┼────────────────────────────────────────┤
│ ユーザー一覧       │ 全学生ユーザーをテーブル表示           │
│                    │ （レベル、EXP含む）                    │
├────────────────┼────────────────────────────────────────┤
│ ユーザー詳細       │ 個別ユーザーの詳細情報と学習履歴       │
├────────────────┼────────────────────────────────────────┤
│ 学年別表示         │ 学年（3〜6）でフィルタリング可能       │
└────────────────┴────────────────────────────────────────┘

================================================================================
6. 画面遷移フロー
================================================================================

■ 学生ユーザーの画面遷移

[トップページ]
    │
    ├─→ [新規登録] ─→ [登録完了] ─→ [ダッシュボード]
    │
    └─→ [ログイン] ─→ [ダッシュボード]
                          │
                          ├─→ [チャプター一覧]
                          │       │
                          │       └─→ [問題一覧（チャプター別）]
                          │               │
                          │               └─→ [問題詳細]
                          │                       │
                          │                       ├─→ [ヒント表示]
                          │                       │     （折りたたみ可能）
                          │                       │
                          │                       ├─→ [Scratchエディタ]
                          │                       │     （外部リンク）
                          │                       │
                          │                       └─→ [解答提出]
                          │                               │
                          │                               └─→ [採点結果]
                          │                                       │
                          │                                       ├─→ [次の問題]
                          │                                       │
                          │                                       ├─→ [もう一度挑戦]
                          │                                       │
                          │                                       └─→ [チャプターに戻る]
                          │
                          └─→ [提出履歴]
                                  │
                                  └─→ [過去の提出詳細]
                                          │
                                          └─→ [再挑戦]

■ 管理者の画面遷移

[管理者登録]（初回のみ）
    │
    └─→ [管理者ログイン]
            │
            └─→ [管理者ダッシュボード]
                    │
                    ├─→ [ユーザー管理]
                    │       │
                    │       └─→ [ユーザー詳細]
                    │
                    ├─→ [問題管理]
                    │       │
                    │       └─→ [問題編集モーダル]
                    │               ├─→ URL編集モーダル
                    │               ├─→ 正解座標編集モーダル
                    │               └─→ 正解ファイル更新モーダル
                    │
                    ├─→ [問題分析]
                    │       │
                    │       └─→ [詳細分析表示]
                    │
                    └─→ [データエクスポート]
                            ├─→ CSV形式でダウンロード
                            └─→ JSON形式でダウンロード

